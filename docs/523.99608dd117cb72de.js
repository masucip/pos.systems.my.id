"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[523],{1629:(M,C,l)=>{l.d(C,{H:()=>F});var a=l(4438),_=l(1314);const r=["modalConfirm"],v=["confirmBox",""],j=["*"];function t(m,g){if(1&m){const d=a.RV6();a.j41(0,"div",1)(1,"h4",2),a.EFF(2),a.k0s(),a.j41(3,"button",3),a.bIt("click",function(){const f=a.eBV(d).$implicit;return a.Njj(f.dismiss("Cross click"))}),a.k0s()(),a.j41(4,"div",4),a.EFF(5),a.k0s(),a.j41(6,"div",5)(7,"button",6),a.bIt("click",function(f){const k=a.eBV(d).$implicit;return a.XpG().no(f),a.Njj(k.close())}),a.EFF(8),a.k0s(),a.j41(9,"button",7),a.bIt("click",function(f){const k=a.eBV(d).$implicit;return a.XpG().yes(f),a.Njj(k.close())}),a.EFF(10),a.k0s()()}if(2&m){const d=a.XpG();a.R7$(2),a.JRh(d.title),a.R7$(3),a.SpI(" ",d.msg," "),a.R7$(3),a.JRh(d.textNo),a.R7$(2),a.JRh(d.textYes)}}let F=(()=>{class m{constructor(d){this.modal=d,this.title="Konfirmasi",this.msg="Apakah anda yakin melakukan aksi ini ?",this.textYes="Ya",this.textNo="Tidak",this.onYes=new a.bkB,this.onNo=new a.bkB}ngOnClick(){this.openModalCOnfirm()}openModalCOnfirm(){this.modal.open(this.modalConfirm,{windowClass:"modal-animation",ariaLabelledBy:"modal-basic-title",size:"sm",centered:!0}).result.then(d=>{},d=>{})}yes(d){this.onYes.emit(d)}no(d){this.onNo.emit(d)}ngOnInit(){}static#t=this.\u0275fac=function(h){return new(h||m)(a.rXU(_.Bq))};static#n=this.\u0275cmp=a.VBU({type:m,selectors:[["","confirmBox",""]],viewQuery:function(h,f){if(1&h&&a.GBs(r,5),2&h){let k;a.mGM(k=a.lsd())&&(f.modalConfirm=k.first)}},hostBindings:function(h,f){1&h&&a.bIt("click",function(){return f.ngOnClick()})},inputs:{confirmBox:"confirmBox",title:"title",msg:"msg",textYes:"textYes",textNo:"textNo"},outputs:{onYes:"onYes",onNo:"onNo"},attrs:v,ngContentSelectors:j,decls:3,vars:0,consts:[["modalConfirm",""],[1,"modal-header","p-2"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","text-reset",3,"click"],[1,"modal-body","p-2"],[1,"modal-footer","p-2","d-flex","justify-content-between"],[1,"btn","btn-outline","btn-outline-danger","float-left",3,"click"],[1,"btn","btn-outline","btn-outline-info",3,"click"]],template:function(h,f){1&h&&(a.NAR(),a.SdG(0),a.DNE(1,t,11,4,"ng-template",null,0,a.C5r))}})}return m})()},7554:(M,C,l)=>{l.d(C,{V:()=>r});var a=l(177),_=l(4438);let r=(()=>{class v{static#t=this.\u0275fac=function(F){return new(F||v)};static#n=this.\u0275mod=_.$C({type:v});static#e=this.\u0275inj=_.G2t({imports:[a.MD]})}return v})()},6523:(M,C,l)=>{l.r(C),l.d(C,{PosViewModule:()=>q});var a=l(177),_=l(126),r=l(4341),v=l(3174),j=l(7469),t=l(4438),F=l(1314),m=l(1629),g=l(4523);const d=["video"],h=["dataCanvas"],f=["drawingCanvas"];let k=(()=>{class i{constructor(){this.capturing=!1,this.cpt="",this.onFound=new t.bkB}ngAfterViewInit(){this.video=this.videoElm?.nativeElement,this.dataCanvas=this.dataCanvasElm?.nativeElement,this.drawingCanvas=this.drawingCanvasElm?.nativeElement,this.dataCtx=this.dataCanvas?.getContext("2d",{willReadFrequently:!0}),this.drawingCtx=this.drawingCanvas?.getContext("2d")}ngOnInit(){this.constraints={audio:!1,video:{facingMode:"environment"}}}getDetector(){return(0,g.A)(function*(){const n=yield BarcodeDetector.getSupportedFormats();return new BarcodeDetector({formats:n})})()}parseResults(n){const e=n.length>0?n[0]:void 0;if(e&&""!==e.rawValue){clearTimeout(this.scanId),this.code=e,this.drawFrame();const{cornerPoints:o}=e;this.drawBoundingBox(o,!1),this.capturing=!1,this.onFound.emit(e),setTimeout(()=>{this.scan()},1e3)}else this.scanId=setTimeout(this.getResults.bind(this),1e3)}connectedCallback(){var n=this;return(0,g.A)(function*(){n.detector=yield n.getDetector(),n.video.onplaying=(0,g.A)(function*(){n.dataCanvas.width=n.dataCanvas.offsetWidth,n.dataCanvas.height=n.dataCanvas.offsetHeight,n.drawingCanvas.width=n.dataCanvas.offsetWidth,n.drawingCanvas.height=n.dataCanvas.offsetHeight,n.getResults()})})()}scan(){var n=this;return(0,g.A)(function*(){n.clearCanvas();try{n.capturing=!0,n.code=null,n.stream instanceof MediaStream?(n.drawingCtx.clearRect(0,0,n.drawingCanvas.offsetWidth,n.drawingCanvas.offsetHeight),yield n.getResults()):(n.stream=yield navigator.mediaDevices.getUserMedia(n.constraints),n.startVideo(),yield n.connectedCallback())}catch(e){if(console.log(e),"function"==typeof n.permissionDialog.showModal)n.permissionDialog.showModal();else{const o=n.permissionDialog.querySelector("p").textContent;alert(o)}n.capturing=!1}})()}stopScan(){clearTimeout(this.scanId),this.clearCanvas(),this.capturing=!1,this.stream.getTracks().forEach(n=>n.stop()),this.stream=null,this.video.srcObject=null}startVideo(){this.video.srcObject=this.stream}drawLine(n,e){this.drawingCtx.beginPath(),this.drawingCtx.lineJoin="round",this.drawingCtx.moveTo(n.x,n.y),this.drawingCtx.lineTo(e.x,e.y),this.drawingCtx.lineWidth=2,this.drawingCtx.strokeStyle="#FF3B58",this.drawingCtx.stroke()}drawFrame(){this.drawingCtx.drawImage(this.video,0,0,this.dataCanvas.width,this.dataCanvas.height)}drawShapeFromCoords(n){const e=n[0];n.slice(1).reduce((o,s)=>(this.drawLine(o,s),s),e)}DOMRectToBoundingBox(n){const{x:e,y:o,width:s,height:c}=n;return[{x:e,y:o},{x:e+s,y:o},{x:e+s,y:o+c},{x:e,y:o+c}]}clearCanvas(){this.drawingCtx.clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height)}drawBoundingBox(n,e=!0){const[o,s,c,p]=n;e&&this.clearCanvas(),this.drawLine(o,s),this.drawLine(s,c),this.drawLine(c,p),this.drawLine(p,o)}getResults(){var n=this;return(0,g.A)(function*(){if(n.code)return clearTimeout(n.scanId),!1;try{let e=n.getImageData(n.video);const o=yield n.detector.detect(e);return e=null,n.parseResults(o),!0}catch(e){return console.log("error",e),!1}})()}getImageData(n){return this.dataCtx.drawImage(n,0,0,this.dataCanvas.width,this.dataCanvas.height),this.dataCtx.getImageData(0,0,this.dataCanvas.width,this.dataCanvas.height)}cek(){console.log(this.dataCanvasElm)}static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["lib-barcode"]],viewQuery:function(e,o){if(1&e&&(t.GBs(d,5),t.GBs(h,5),t.GBs(f,5)),2&e){let s;t.mGM(s=t.lsd())&&(o.videoElm=s.first),t.mGM(s=t.lsd())&&(o.dataCanvasElm=s.first),t.mGM(s=t.lsd())&&(o.drawingCanvasElm=s.first)}},hostVars:1,hostBindings:function(e,o){2&e&&t.BMQ("capturing",o.cpt)},outputs:{onFound:"onFound"},decls:22,vars:0,consts:[["core1",""],["dataCanvas",""],["video",""],["drawingCanvas",""],["id","container img-thumbnail"],["id","video-container"],["id","data-canvas"],["autoplay","","playsinline",""],["id","drawing-canvas"],["id","frame"],[1,"corner","top-left"],[1,"corner","top-right"],[1,"corner","bottom-right"],[1,"corner","bottom-left"],["part","dialog"],["id","close"]],template:function(e,o){1&e&&(t.nrm(0,"div",null,0),t.j41(2,"div",4)(3,"div",5),t.nrm(4,"canvas",6,1)(6,"video",7,2)(8,"canvas",8,3),t.j41(10,"div",9),t.nrm(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),t.k0s()(),t.j41(15,"dialog",14)(16,"h3"),t.EFF(17,"No access to camera"),t.k0s(),t.j41(18,"p"),t.EFF(19," Your device does not have permission to access the camera and microphone. Please enable this in your device's settings. "),t.k0s(),t.j41(20,"button",15),t.EFF(21,"OK"),t.k0s()()())},styles:["[_nghost-%COMP%] {\n      display: block;\n      --video-width: 100%;\n      --video-height: auto;\n      --video-background-color: #cccccc;\n      --dialog-background-color: #ffffff;\n      --dialog-backdrop-background-color: #cecece;\n    }\n    \n    #container[_ngcontent-%COMP%] {\n      position: relative;\n      width: var(--video-width);\n      background-color: var(--video-background-color);\n    }\n    \n    @media screen and (min-width: 1024px) {\n      #container[_ngcontent-%COMP%] {\n        width: 100%;\n        height: auto;\n      }\n    }\n    \n    #video-container[_ngcontent-%COMP%] {\n      position: relative;\n      overflow: hidden;\n      height: var(--video-height);\n      max-height: var(--video-height);\n    }\n    \n    video[_ngcontent-%COMP%] {\n      width: 100%;\n      display: block;\n      object-fit: cover;\n    }\n    \n    canvas[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    \n    #data-canvas[_ngcontent-%COMP%] {\n      visibility: hidden;\n    }\n    \n    #drawing-canvas[_ngcontent-%COMP%] {\n      background-color: transparent;\n      visibility: hidden;\n    }\n    \n    #frame[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: transparent;\n      transform-origin: center center;\n      transform: scale(1.1);\n      transition: transform .3s ease-out;\n    }\n    \n    [capturing][_nghost-%COMP%]   #frame[_ngcontent-%COMP%] {\n      transform: scale(0.7);\n    }\n    \n    [capturing][_nghost-%COMP%]   #drawing-canvas[_ngcontent-%COMP%] {\n      visibility: visible;\n    }\n    \n    [no-frame][_nghost-%COMP%]   #frame[_ngcontent-%COMP%] {\n      display: none;\n    }\n    \n    .corner[_ngcontent-%COMP%] {\n      position: absolute;\n      width: 50px;\n      height: 50px;\n      border: 3px solid #ffff00;\n      clip-path: polygon(0 46px, 46px 46px, 46px 0, 0 0);\n    }\n    \n    .top-left[_ngcontent-%COMP%] {\n      top: 0;\n      left: 0;\n    }\n    \n    .top-right[_ngcontent-%COMP%] {\n      top: 0;\n      right: 0;\n      transform: rotate(90deg);\n    }\n    \n    .bottom-right[_ngcontent-%COMP%] {\n      bottom: 0;\n      right: 0;\n      transform: rotate(180deg);\n    }\n    \n    .bottom-left[_ngcontent-%COMP%] {\n      bottom: 0;\n      left: 0;\n      transform: rotate(-90deg);\n    }\n    \n    dialog[_ngcontent-%COMP%] {\n      width: min(50ch, 100vw);\n      border: 1px solid #cccccc;\n      transform-origin: center center;\n      animation: _ngcontent-%COMP%_fade-in-slide-in .3s;\n      background-color: var(--dialog-background-color);\n    }\n\n    dialog[_ngcontent-%COMP%]::backdrop {\n      opacity: .4;\n      background-color: var(--dialog-backdrop-background-color);\n    }\n\n    @keyframes _ngcontent-%COMP%_fade-in-slide-in {\n      from {\n        opacity: 0;\n        transform: translateY(-20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }"]})}return i})();function x(i){function u(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var e=n.done;return Promise.resolve(n.value).then(function(o){return{value:o,done:e}})}return(x=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return u(this.n.apply(this.s,arguments))},return:function(e){var o=this.s.return;return void 0===o?Promise.resolve({value:e,done:!0}):u(o.apply(this.s,arguments))},throw:function(e){var o=this.s.return;return void 0===o?Promise.reject(e):u(o.apply(this.s,arguments))}},new x(i)}var V=l(4096);const I=new class J extends V.Ay{constructor(){super("dbPWA"),this.version(3).stores({setting:"++id, key"})}};let R=(()=>{class i{isStoragePersisted(){return(0,g.A)(function*(){return(yield navigator.storage)&&navigator.storage.persisted&&navigator.storage.persisted()})()}openFile(){var n=this;return(0,g.A)(function*(){let e=yield n.isStoragePersisted();if(console.log("Checkpresisten",e),e||(yield n.persist(),console.log(yield n.isStoragePersisted())),navigator.storage&&navigator.storage.estimate){const o=yield navigator.storage.estimate();console.log(`Quota: ${o.quota}`),console.log(`Usage: ${o.usage}`)}else console.error("StorageManager not found")})()}persist(){return(0,g.A)(function*(){return(yield navigator.storage)&&navigator.storage.persist&&navigator.storage.persist()})()}openFolder(){return(0,g.A)(function*(){let n,e=yield I.setting.where("key").equals("directory").first();e?n=e.value:(n=yield window.showDirectoryPicker(),yield I.setting.add({key:"directory",value:n})),yield n.getFileHandle("My Notes.txt",{create:!0});var c,o=!1,s=!1;try{for(var w,p=function P(i){var u,n,e,o=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,e=Symbol.iterator);o--;){if(n&&null!=(u=i[n]))return u.call(i);if(e&&null!=(u=i[e]))return new x(u.call(i));n="@@asyncIterator",e="@@iterator"}throw new TypeError("Object is not async iterable")}(n.values());o=!(w=yield p.next()).done;o=!1){const b=w.value;"file"===b.kind&&b.getFile().then(y=>console.log(`${y.name} (${y.size})`))}}catch(b){s=!0,c=b}finally{try{o&&null!=p.return&&(yield p.return())}finally{if(s)throw c}}})()}scan(){return(0,g.A)(function*(){"bluetooth"in navigator&&(yield function(){var e=(0,g.A)(function*({bleService:o,bleCharacteristic:s}){try{const c=yield navigator.bluetooth.requestDevice({filters:[{services:[o]}]});c.addEventListener("gattserverdisconnected",()=>{});const b=yield(yield(yield c.gatt.connect()).getPrimaryService(o)).getCharacteristic(s);return yield b.startNotifications(),b.addEventListener("characteristicvaluechanged",y=>{const E=y.target.value.getUint8(0);console.log(`${s} changed`,E)}),b.readValue(),b}catch(c){console.error(c)}});return function(s){return e.apply(this,arguments)}}()({bleService:"battery_service",bleCharacteristic:"battery_level"}))})()}static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["lib-bluetooth"]],decls:0,vars:0,template:function(e,o){}})}return i})(),T=(()=>{class i{transform(n,e){let o=0,s=e.split(",");return n.forEach(c=>{let p=0;s.forEach((w,b)=>{let y=w.substring(0,1),E=w.substring(1,w.length),B=parseFloat(c[E]);"+"==y?p+=B:"-"==y?p-=B:"*"==y?p*=B:"/"==y?p/=B:p=parseFloat(c[w]||0)}),o+=p}),o}static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275pipe=t.EJ8({name:"sum",type:i,pure:!0})}return i})();const G=["modalBayar"],O=["barcodeScanner"],D=(i,u)=>({"text-info":i,"text-muted":u});function N(i,u){if(1&i){const n=t.RV6();t.j41(0,"div",41)(1,"div",42),t.bIt("click",function(){const o=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.addItem(o))}),t.j41(2,"div",43)(3,"div",44),t.EFF(4),t.j41(5,"p",25),t.EFF(6),t.nI1(7,"number"),t.k0s()()()()()}if(2&i){const n=u.$implicit;t.R7$(4),t.SpI(" ",n.nama_produk," "),t.R7$(2),t.JRh(t.bMT(7,2,n.harga_jual))}}function $(i,u){if(1&i){const n=t.RV6();t.j41(0,"div",45)(1,"div",43)(2,"button",46),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.get("jumlah_jual").setValue(o.get("jumlah_jual").value-1))}),t.nrm(3,"i",47),t.k0s(),t.j41(4,"div",44)(5,"h5",25),t.EFF(6),t.k0s(),t.j41(7,"div",8)(8,"div",9)(9,"div",48)(10,"b"),t.EFF(11),t.k0s()()(),t.j41(12,"div"),t.EFF(13),t.nI1(14,"number"),t.k0s()()(),t.j41(15,"button",49),t.bIt("onYes",function(){const o=t.eBV(n).index,s=t.XpG();return t.Njj(s.removeItem(o))}),t.nrm(16,"i",50),t.k0s(),t.j41(17,"button",51),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.get("jumlah_jual").setValue(o.get("jumlah_jual").value+1))}),t.nrm(18,"i",52),t.k0s()()()}if(2&i){const n=u.$implicit;t.Y8G("formGroupName",u.index),t.R7$(2),t.Y8G("disabled",1==n.get("jumlah_jual").value),t.R7$(4),t.JRh(n.get("produk").get("nama_produk").value),t.R7$(5),t.JRh(n.get("jumlah_jual").value),t.R7$(2),t.SpI(" Rp. ",t.bMT(14,5,n.get("jumlah_jual").value*n.get("harga_jual").value)," ")}}function S(i,u){if(1&i&&(t.j41(0,"div",53)(1,"div",54)(2,"div",55)(3,"div",56),t.EFF(4,"Nama Produk"),t.k0s(),t.nrm(5,"input",57),t.k0s()(),t.j41(6,"div",16)(7,"button",58),t.EFF(8,"Ok"),t.k0s()()()),2&i){const n=t.XpG();t.Y8G("formGroup",n.formItem)}}function A(i,u){if(1&i){const n=t.RV6();t.j41(0,"div",66)(1,"div",67),t.nrm(2,"select",68),t.k0s(),t.nrm(3,"input",69),t.j41(4,"div",70)(5,"button",71),t.bIt("click",function(){const o=t.eBV(n).index,s=t.XpG(2);return t.Njj(s.removeBayar(o))}),t.EFF(6,"Hapus"),t.k0s()()()}if(2&i){const n=u.index;t.Y8G("formGroupName",n),t.R7$(5),t.Y8G("disabled",0==n)}}function Y(i,u){if(1&i){const n=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.saveJual())}),t.EFF(1,"Selesai"),t.k0s()}if(2&i){const n=t.XpG(2);t.Y8G("disabled",n.formJual.invalid)}}function X(i,u){if(1&i){const n=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.updateJual())}),t.EFF(1,"Update Penjualan"),t.k0s()}if(2&i){const n=t.XpG(2);t.Y8G("disabled",n.formJual.invalid)}}function U(i,u){if(1&i){const n=t.RV6();t.j41(0,"div",53)(1,"div",7)(2,"div",8)(3,"h1",59),t.EFF(4,"Total"),t.k0s()()(),t.j41(5,"div",60),t.DNE(6,A,7,2,"div",61),t.j41(7,"button",62),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.addBayar())}),t.EFF(8,"Tambah Pembayaran Lain"),t.k0s()(),t.j41(9,"div",16)(10,"div",8)(11,"h1",63),t.EFF(12,"Dibayar"),t.k0s()(),t.j41(13,"div",8)(14,"h3",9),t.EFF(15,"Sisa"),t.k0s()()(),t.j41(16,"div",16)(17,"button",64),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.cek())}),t.EFF(18,"Cek"),t.k0s(),t.DNE(19,Y,2,1,"button",65)(20,X,2,1,"button",65),t.k0s()()}if(2&i){const n=t.XpG();t.Y8G("formGroup",n.formJual),t.R7$(6),t.Y8G("ngForOf",n.formJual.get("bayar").controls),t.R7$(13),t.Y8G("ngIf",!n.formJual.get("id").value),t.R7$(),t.Y8G("ngIf",n.formJual.get("id").value)}}let L=(()=>{class i{keyboard(n){"Enter"==n.key?(this.findByBarcode(this.keys),this.keys=""):this.keys+=n.key}constructor(n,e){this.produk=n,this.modal=e,this.listJual=[],this.keys="",this.token="",this.formJual=new r.gE({id:new r.MJ(""),tanggal:new r.MJ("",r.k0.required),no_faktur:new r.MJ("",r.k0.required),total_potongan:new r.MJ(""),total_transaksi:new r.MJ(""),total_bayar:new r.MJ(""),konsumen:new r.gE({id:new r.MJ("",r.k0.required),nama_konsumen:new r.MJ("")}),item:new r.Yp([],r.k0.required),bayar:new r.Yp([],r.k0.required)}),this.formItem=this.createItem(),this.token=localStorage.getItem("token")}ngOnInit(){this.resetForm()}scan(){this.barcodeScanner.capturing?this.barcodeScanner.stopScan():this.barcodeScanner.scan()}onFound(n){n.rawValue&&j.X.produk.where("barcode").equalsIgnoreCase(n.rawValue).first().then(e=>{e&&this.addItem(e)})}resetForm(){let n=(new Date).getTime();this.formJual.reset(),this.formJual.get("item").clear(),this.formJual.get("bayar").clear(),this.formJual.patchValue({tanggal:Date(),no_faktur:"FK-"+n}),this.formJual.get("bayar").push(this.createBayar())}createItem(n={produk:{}}){return new r.gE({id:new r.MJ(n.id),jumlah_jual:new r.MJ(n.jumlah_jual||1,r.k0.required),harga_jual:new r.MJ(n.harga_jual||n.produk.harga_jual,r.k0.required),potongan:new r.MJ(n.potongan||0,r.k0.required),produk:new r.gE({id:new r.MJ(n.produk.id,r.k0.required),nama_produk:new r.MJ(n.produk.nama_produk)})})}createBayar(n={rekening:{}}){return new r.gE({id:new r.MJ(n.id),tanggal_bayar:new r.MJ(n.tanggal_bayar||Date(),r.k0.required),jumlah_bayar:new r.MJ(n.jumlah_bayar,r.k0.required),rekening:new r.gE({id:new r.MJ(n.rekening.id,r.k0.required),nama_rekening:new r.MJ(n.rekening.nama_rekening)})})}addBayar(){this.formJual.get("bayar").push(this.createBayar())}removeBayar(n){this.formJual.get("bayar").removeAt(n)}findByBarcode(n){}addItem(n){let e=this.formJual.get("item").value.findIndex(o=>o.produk.id==n.id);e<0?this.formJual.get("item").push(this.createItem({produk:n})):this.formJual.get("item").at(e).get("jumlah_jual").setValue(this.formJual.get("item").at(e).get("jumlah_jual").value+1)}removeItem(n){this.formJual.get("item").removeAt(n)}openModalBayar(){j.X.penjualan.add({no_faktur:"FK-1122",tanggal:"2024-01-01",id_konsumen:1,total_potongan:2e3,sub_total:2e3,status_pajak:2e3,persen_ppn:2e3,nilai_ppn:2e3,persen_pph:2e3,nilai_pph:2e3,grand_total:2e3,total_dibayar:2e3,total_sisa:2e3,keterangan:"",rincian:[{id_produk:1,nama_produk:"Barang A",harga_jual:1,jumlah_jual:1,jumlah_satuan:1,id_satuan:1,modal:1,keterangan:""}]}),this.modal.open(this.modalBayar,{windowClass:"modal-animation",ariaLabelledBy:"modal-basic-title",size:"md"}).result.then(e=>{},e=>{})}openModalCariKonsumen(){}openModalCariPenjualan(){}saveJual(){}updateJual(){}cek(){console.log(this.formJual)}static#t=this.\u0275fac=function(e){return new(e||i)(t.rXU(v.X),t.rXU(F.Bq))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["lib-pos-view"]],viewQuery:function(e,o){if(1&e&&(t.GBs(G,5),t.GBs(O,5)),2&e){let s;t.mGM(s=t.lsd())&&(o.modalBayar=s.first),t.mGM(s=t.lsd())&&(o.barcodeScanner=s.first)}},hostBindings:function(e,o){1&e&&t.bIt("keyup",function(c){return o.keyboard(c)},!1,t.EBC)},decls:77,vars:24,consts:[["cariProduk",""],["barcodeScanner",""],["modalDetailItem",""],["modalBayar",""],[1,"row"],[1,"col-md-8",2,"padding","1vh"],[1,"card","m-0","shadow","rounded-xl",2,"height","98vh"],[1,"card-header","p-2"],[1,"d-flex"],[1,"flex-grow-1"],["type","text","placeholder","Cari produk",1,"form-control","rounded-xl","border","border-info"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"bi-qr-code-scan","fs-5","fw-bold",3,"ngClass"],[1,"card-body","overflow-auto","p-2"],[1,"row","g-2"],["class","col-md-4 pr-0",4,"ngFor","ngForOf"],[1,"card-footer","p-2"],["routerLink","setting",1,"btn","btn-outline-primary","rounded-xl"],[1,"bi-gear"],[1,"col-md-3",2,"padding","1vh",3,"formGroup"],[1,"card-header","p-2","d-flex","justify-content-between"],[1,"mb-1"],[1,"float-right","mb-1"],["formArrayName","item",1,"card-body","overflow-auto","p-2"],["class","card shadow rounded-xl mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"mb-0"],[1,"btn","btn-outline-info","rounded-xl",3,"click"],[1,"bi-search"],[1,"bi-card-list"],[1,"btn","btn-primary","float-right","rounded-xl",3,"click","disabled"],[1,"bi-credit-card"],[1,"col-md-1",2,"padding","1vh"],[1,"card","shadow","mb-0",2,"height","98vh"],[1,"card-body","p-1"],[1,"d-flex","flex-column","h-100"],[2,"zoom","25%",3,"onFound"],["src","assets/saweria.png","alt","",1,"img-fluid"],[1,"btn","w-100","mb-1","btn-outline-info","rounded-xl",3,"click"],[1,"bi-card-list","fs-2"],[1,"btn","w-100","mb-1","btn-primary","float-right","rounded-xl",3,"click","disabled"],[1,"bi-credit-card","fs-2"],[1,"col-md-4","pr-0"],[1,"card","shadow","rounded-xl","mb-0",3,"click"],[1,"card-body","d-flex","p-0"],[1,"flex-grow-1","p-2","text-truncate"],[1,"card","shadow","rounded-xl","mb-2",3,"formGroupName"],[1,"btn","rounded-left-xl","rounded-0","btn-info",3,"click","disabled"],[1,"bi-dash-circle"],[1,"d-flex","align-item-beetween"],["confirmBox","","msg","Apakah anda yakin untuk menghapus item ini ?",1,"btn","rounded-0","btn-danger",3,"onYes"],[1,"bi-trash"],[1,"btn","rounded-right-xl","rounded-0","btn-info",3,"click"],[1,"bi-plus-circle"],[1,"card","shadow",3,"formGroup"],[1,"card-body","p-2"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","nama_produk",1,"form-control"],[1,"btn","btn-primary","rounded-xl","float-right"],[1,"mb-0","flex-grow-1"],["formArrayName","bayar",1,"card-body","p-2"],["class","input-group mb-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"btn","btn-info","btn-sm","btn-block",3,"click"],[1,"flex-grow-1","text-muted"],[1,"btn","btn-warning",3,"click"],["class","btn btn-primary rounded-xl float-right",3,"disabled","click",4,"ngIf"],[1,"input-group","mb-3",3,"formGroupName"],["formGroupName","rekening",1,"input-group-prepend"],["formControlName","id","id","inputGroupSelect02",1,"custom-select"],["type","text","formControlName","jumlah_bayar",1,"form-control"],[1,"input-group-append"],[1,"btn","btn-danger",3,"click","disabled"],[1,"btn","btn-primary","rounded-xl","float-right",3,"click","disabled"]],template:function(e,o){if(1&e){const s=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9),t.nrm(6,"input",10,0),t.k0s(),t.j41(8,"div")(9,"button",11),t.bIt("click",function(){return t.eBV(s),t.Njj(o.scan())}),t.nrm(10,"b",12),t.k0s()()()(),t.j41(11,"div",13)(12,"div",14),t.DNE(13,N,8,4,"div",15),t.nI1(14,"async"),t.k0s()(),t.j41(15,"div",16)(16,"button",17),t.nrm(17,"i",18),t.EFF(18," Pengaturan "),t.k0s()()()(),t.j41(19,"div",19)(20,"div",6)(21,"div",20)(22,"h3",21),t.EFF(23),t.k0s(),t.j41(24,"h3",22),t.EFF(25),t.nI1(26,"sum"),t.nI1(27,"number"),t.k0s()(),t.j41(28,"div",20)(29,"i"),t.EFF(30),t.k0s(),t.j41(31,"i"),t.EFF(32),t.nI1(33,"date"),t.k0s()(),t.j41(34,"div",23),t.DNE(35,$,19,7,"div",24),t.k0s(),t.j41(36,"div",16)(37,"div",8)(38,"div",9)(39,"i"),t.EFF(40,"Konsumen"),t.k0s(),t.j41(41,"p",25),t.EFF(42),t.k0s()(),t.j41(43,"div")(44,"button",26),t.bIt("click",function(){return t.eBV(s),t.Njj(o.openModalCariKonsumen())}),t.nrm(45,"i",27),t.EFF(46," Cari "),t.k0s()()()(),t.j41(47,"div",16)(48,"button",26),t.bIt("click",function(){return t.eBV(s),t.Njj(o.openModalCariPenjualan())}),t.nrm(49,"i",28),t.EFF(50," History "),t.k0s(),t.j41(51,"button",29),t.bIt("click",function(){return t.eBV(s),t.Njj(o.openModalBayar())}),t.nrm(52,"i",30),t.EFF(53," Pembayaran "),t.k0s()()()(),t.j41(54,"div",31)(55,"div",32)(56,"div",33)(57,"div",34)(58,"div",9)(59,"lib-barcode",35,1),t.bIt("onFound",function(p){return t.eBV(s),t.Njj(o.onFound(p))}),t.k0s(),t.nrm(61,"lib-bluetooth")(62,"img",36),t.k0s(),t.j41(63,"div")(64,"button",37),t.bIt("click",function(){return t.eBV(s),t.Njj(o.openModalCariPenjualan())}),t.nrm(65,"i",38),t.j41(66,"p",25),t.EFF(67,"History"),t.k0s()(),t.j41(68,"button",39),t.bIt("click",function(){return t.eBV(s),t.Njj(o.openModalBayar())}),t.nrm(69,"i",40),t.j41(70,"p",25),t.EFF(71,"Bayar"),t.k0s()()()()()()()(),t.DNE(72,S,9,1,"ng-template",null,2,t.C5r)(74,U,21,4,"ng-template",null,3,t.C5r),t.nrm(76,"router-outlet")}if(2&e){const s=t.sdS(60);t.R7$(10),t.Y8G("ngClass",t.l_i(21,D,s.capturing,!s.capturing)),t.R7$(3),t.Y8G("ngForOf",t.bMT(14,11,o.produk.list)),t.R7$(6),t.Y8G("formGroup",o.formJual),t.R7$(4),t.SpI("",o.formJual.get("item").length," Item"),t.R7$(2),t.JRh(t.bMT(27,16,t.i5U(26,13,o.formJual.get("item").value,"harga_jual,*jumlah_jual,-potongan"))),t.R7$(5),t.SpI("#",o.formJual.get("no_faktur").value,""),t.R7$(2),t.JRh(t.i5U(33,18,o.formJual.get("tanggal").value,"dd-MM-yyyy")),t.R7$(3),t.Y8G("ngForOf",o.formJual.get("item").controls),t.R7$(7),t.JRh(o.formJual.get("konsumen").value.nama_konsumen),t.R7$(9),t.Y8G("disabled",o.formJual.get("item").invalid),t.R7$(17),t.Y8G("disabled",o.formJual.get("item").invalid)}},dependencies:[a.YU,a.Sq,a.bT,_.n3,_.Wk,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,r.$R,r.v8,m.H,k,R,a.Jj,a.QX,a.vh,T]})}return i})();var H=l(7554);let W=(()=>{class i{constructor(){}cek(){return(0,g.A)(function*(){const n="BarcodeDetector"in window&&(yield BarcodeDetector.getSupportedFormats()).includes("qr_code");console.log(n)})()}static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})(),K=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({providers:[W],imports:[a.MD]})}return i})(),Q=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[a.MD]})}return i})();const z=[{path:"",component:L,children:[{path:"setting",loadChildren:()=>l.e(686).then(l.bind(l,6686)).then(i=>i.SettingModule)}]}];let q=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[a.MD,_.iI.forChild(z),r.YN,r.X1,H.V,K,Q]})}return i})()},3174:(M,C,l)=>{l.d(C,{X:()=>j});var a=l(4523),_=l(4096),r=l(7469),v=l(4438);let j=(()=>{class t{constructor(){this.list=(0,_.Dd)(()=>r.X.produk.toArray())}add(m){delete m.id,r.X.produk.add(m)}update(m){r.X.produk.update(m.id,m)}hapus(m){return(0,a.A)(function*(){yield r.X.produk.delete(m)})()}static#t=this.\u0275fac=function(g){return new(g||t)};static#n=this.\u0275prov=v.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);